<h1> Reviews feitas por você: </h1>
<table>

  <tr>
    <th> Comida </th>
    <th> Restaurante </th>
    <th> Nota </th>
    <th> Comentário </th>
    <th> Ações      </th>
  </tr>

  <% @reviews.where(user_id: current_user.id).each do |r|%>
    <tr>
      <% f = Food.find(r.food_id) %>
      <td><%=f.name%></td>
      <% x = Restaurant.find(f.restaurant_id) %>
      <td><%=x.name%></td>
      <td class="rating">
        <% rate = (r.rating/2).to_i %>
        <% half = r.rating/2.0 - rate %>
        <% for i in 0...rate %>
            <span class="fa fa-star checked"></span>
        <% end %>
        <% if half == 0 %>
          <% for i in 0...5-rate %>
              <span class="fa fa-star"></span>
          <% end %>
        <% else %>
          <span class="fa fa-star-half-full checked"></span>
          <% for i in 0...4-rate %>
              <span class="fa fa-star"></span>
          <% end %>
        <% end %>
      </td>
      <td><%=r.comment%></td>
      <td><%= link_to "Editar",{controller: 'reviews',action: 'edit', id: r.id},
              class:'button1'%>
          <%= link_to "Remover",r,method: :delete, data: {confirm: "Tem certeza que deseja excluir sua avaliação?"},id:r.id,
              class:'button2'%>
      </td>
    </tr>
  <% end %>
</table>

<a href=main>Voltar</a>
